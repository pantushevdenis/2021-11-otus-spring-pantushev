# JPQL, Spring ORM, DAO на основе Spring ORM + JPA
Домашняя работа

Пантюшев Д.А.  
2021-11-otus-spring  
otus.ru  
2021-2022 гг.

### Краткое описание
Переписать приложение для хранения книг на ORM.

### Цель
полноценно работать с JPA + Hibernate для подключения к реляционным БД посредством ORM-фреймворка.  
Результат: Высокоуровневое приложение с JPA-маппингом сущностей.  

### Требования
1. Использовать JPA, Hibernate только в качестве JPA-провайдера. 
2. Для решения проблемы N+1 можно использовать специфические для Hibernate аннотации @Fetch и @BatchSize
3. Добавить сущность "комментария к книге", реализовать CRUD для новой сущности.
4. Покрыть репозитории тестами, используя H2 базу данных и соответствующий H2 Hibernate-диалект для тестов.
5. Не забудьте отключить DDL через Hibernate
6. @Transactional рекомендуется ставить только на методы сервиса.

### Рекомендации к выполнению работы:
1. НЕ делать AbstractDao.
2. НЕ делать наследования в тестах

### Примечания 
Это домашнее задание выполняется на основе предыдущего.  
Это домашнее задание является основой для следующих.

### Замечания по реализации
1. Реализован сервис работы с данными. Он обращается к ДАО таблиц.
2. Добавлена транзакционность на методах сервиса работы с данными.
3. Приниммаем следующую стратегию загрузки данных: 
    поля справочников (многие-к-одному) грузим сразу, джойном; дочерние объекты
   (многие-к-одному грузим лениво). С хитростями типа графов и прочего не 
   связываемся, используем Lazy-fetch и HQL для указания джойн-загрузки 
   справочных таблиц. Архитектурно предполагаем, что при загрузке больших таблиц
   обращений к полю Comments производится не будет (по крайней мере, будет сурово 
   порицаться).

